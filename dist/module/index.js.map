{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/index.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,YAAY,EAAE,MAAM,gBAAgB,CAAC;AAC9C,OAAO,EAAE,WAAW,EAAE,MAAM,eAAe,CAAC;AAE5C,IAAM,QAAQ,GAAG,OAAO,MAAM,KAAK,WAAW,CAAC;AAE/C;IAME,mBAAY,IAAsB;QAAlC,iBAEC;QAND,OAAE,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QAC7C,cAAS,GAAG,eAAa,IAAI,CAAC,EAAI,CAAC;QACnC,UAAK,GAAG,mBAAiB,IAAI,CAAC,EAAI,CAAC;QAMnC,SAAI,GAAG,UAAC,IAAsB;YAE5B,IAAI,QAAQ,EAAE;gBACZ,OAAO;aACR;YAGD,IAAM,GAAG,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;YAC5C,IAAM,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;YAC9C,IAAM,GAAG,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;YAG1C,GAAG,CAAC,EAAE,GAAG,KAAI,CAAC,KAAK,CAAC;YACpB,GAAG,CAAC,SAAS,GAAG,WAAW,CAAC,KAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;YAClD,IAAM,WAAW,GAAG,QAAQ,CAAC,cAAc,CAAC,KAAI,CAAC,KAAK,CAAC,CAAC;YACxD,IAAI,WAAW,EAAE;gBACf,WAAW,CAAC,MAAM,EAAE,CAAC;aACtB;YACD,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;YAG/B,OAAO,CAAC,EAAE,GAAG,KAAI,CAAC,SAAS,CAAC;YAC5B,OAAO,CAAC,SAAS,GAAG,YAAY,CAAC,OAAO,CAAC;YACzC,GAAG,CAAC,SAAS,GAAG,YAAY,CAAC,GAAG,CAAC;YAEjC,IAAM,QAAQ,GAAG,QAAQ,CAAC,cAAc,CAAC,KAAI,CAAC,SAAS,CAAC,CAAC;YACzD,IAAI,QAAQ,EAAE;gBACZ,QAAQ,CAAC,MAAM,EAAE,CAAC;aACnB;YAED,OAAO,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;YACzB,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;QAErC,CAAC,CAAA;QAED,WAAM,GAAG;YAEP,IAAI,QAAQ,EAAE;gBACZ,OAAO;aACR;YAED,IAAM,OAAO,GAAG,QAAQ,CAAC,cAAc,CAAC,KAAI,CAAC,SAAS,CAAC,CAAC;YACxD,IAAI,CAAC,OAAO,EAAE;gBACZ,OAAO;aACR;YAED,IAAM,MAAM,GAAG,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC;YACvE,IAAI,MAAM,EAAE;gBACV,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC;aACvD;iBACI;gBACH,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC;aACpD;QAEH,CAAC,CAAA;QAED,UAAK,GAAG;YAEN,IAAI,QAAQ,EAAE;gBACZ,OAAO;aACR;YAED,IAAM,OAAO,GAAG,QAAQ,CAAC,cAAc,CAAC,KAAI,CAAC,SAAS,CAAC,CAAC;YACxD,IAAI,CAAC,OAAO,EAAE;gBACZ,OAAO;aACR;YAED,IAAM,MAAM,GAAG,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC;YACvE,IAAI,CAAC,MAAM,EAAE;gBACX,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC;aACpD;QAEH,CAAC,CAAA;QAED,SAAI,GAAG;YAEL,IAAI,QAAQ,EAAE;gBACZ,OAAO;aACR;YAED,IAAM,OAAO,GAAG,QAAQ,CAAC,cAAc,CAAC,KAAI,CAAC,SAAS,CAAC,CAAC;YACxD,IAAI,CAAC,OAAO,EAAE;gBACZ,OAAO;aACR;YAED,IAAM,MAAM,GAAG,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC;YACvE,IAAI,MAAM,EAAE;gBACV,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC;aACvD;QAEH,CAAC,CAAA;QA7FC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAClB,CAAC;IA8FH,gBAAC;AAAD,CAAC,AAtGD,IAsGC","sourcesContent":["import { UntrusiveOptions } from \"./types\";\nimport { styleClasses } from \"./styleClasses\";\nimport { generateCss } from \"./generateCss\";\n\nconst isServer = typeof window === \"undefined\";\n\nexport default class Untrusive {\n\n  id = Math.random().toString(36).substr(2, 9);\n  wrapperId = `untrusive-${this.id}`;\n  cssId = `untrusive-css-${this.id}`;\n\n  constructor(opts: UntrusiveOptions) {\n    this.init(opts);\n  }\n\n  init = (opts: UntrusiveOptions) => {\n\n    if (isServer) {\n      return;\n    }\n\n    // CREATE REQUIRED TAGS\n    const css = document.createElement(\"style\");\n    const wrapper = document.createElement(\"div\");\n    const bar = document.createElement(\"div\");\n\n    // PATCH CSS\n    css.id = this.cssId;\n    css.innerHTML = generateCss(this.wrapperId, opts);\n    const existingCss = document.getElementById(this.cssId);\n    if (existingCss) {\n      existingCss.remove();\n    }\n    document.head.appendChild(css);\n\n    // PATCH ELEMENT\n    wrapper.id = this.wrapperId;\n    wrapper.className = styleClasses.wrapper;\n    bar.className = styleClasses.bar;\n\n    const existing = document.getElementById(this.wrapperId);\n    if (existing) {\n      existing.remove();\n    }\n\n    wrapper.appendChild(bar);\n    document.body.appendChild(wrapper);\n\n  }\n\n  toggle = () => {\n\n    if (isServer) {\n      return;\n    }\n\n    const wrapper = document.getElementById(this.wrapperId);\n    if (!wrapper) {\n      return;\n    }\n\n    const active = wrapper.classList.contains(styleClasses.wrapper_active);\n    if (active) {\n      wrapper.classList.remove(styleClasses.wrapper_active);\n    }\n    else {\n      wrapper.classList.add(styleClasses.wrapper_active);\n    }\n\n  }\n\n  start = () => {\n\n    if (isServer) {\n      return;\n    }\n\n    const wrapper = document.getElementById(this.wrapperId);\n    if (!wrapper) {\n      return;\n    }\n\n    const active = wrapper.classList.contains(styleClasses.wrapper_active);\n    if (!active) {\n      wrapper.classList.add(styleClasses.wrapper_active);\n    }\n\n  }\n\n  stop = () => {\n\n    if (isServer) {\n      return;\n    }\n\n    const wrapper = document.getElementById(this.wrapperId);\n    if (!wrapper) {\n      return;\n    }\n\n    const active = wrapper.classList.contains(styleClasses.wrapper_active);\n    if (active) {\n      wrapper.classList.remove(styleClasses.wrapper_active);\n    }\n\n  }\n\n}\n\nexport { UntrusiveOptions };\n"]}